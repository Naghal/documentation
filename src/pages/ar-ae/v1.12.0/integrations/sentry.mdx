---
العنوان: "Sentry"
metaTitle: "التكامل مع Sentry"
metaDescription: "كيفية التكامل مع Sentry مع OpenReplay ورؤية الأخطاء الخلفية جنبا إلى جنب مع تسجيلات الجلسات."
---

كيفية التكامل مع Sentry مع OpenReplay ورؤية الأخطاء الخلفية جنبا إلى جنب مع تسجيلات الجلسات.

## 1. إنشاء رمز مصادقة Sentry

انتقل إلى [Sentry > Account > API > Auth Tokens](https://sentry.io/settings/account/api/auth-tokens/) وإنشاء الرمز مع أذونات `event:read`، `org:read` و `project:read`. هذا الآخر سيستخدم في الخطوة التالية عند تمكين التكامل الخاص بك في لوحة معلومات OpenReplay.

![إنشاء رمز في Sentry](/static/sentry-1.png#center)

## 2. تمكين التكامل في OpenReplay

انسخ `organization_slug` و `project_slug` من صفحة **المشاريع** في لوحة معلومات Sentry الخاصة بك.

![صفحة المشاريع في Sentry](/static/sentry-2.png#center)

![نموذج التكامل مع Sentry في OpenReplay](/static/sentry-3.png#center)

ثم لصقهما في لوحة معلومات OpenReplay تحت 'التفضيلات > التكامل' جنبا إلى جنب مع الرمز الذي أنشأته في الخطوة 1.

## 3. الانتشار openReplaySessionToken

لأن OpenReplay يجب أن يربط الحدث Sentry مع جلسة المستخدم المسجلة، يجب تحديد الحدث Sentry برمز فريد.

### الواجهة الأمامية
إذا كنت تعتمد على Sentry في الواجهة الأمامية، يمكنك اتباع المثال أدناه.


```javascript
import OpenReplay from "@openreplay/tracker";
import * as Sentry from "@sentry/browser";

const tracker = new OpenReplay({
	projectKey: MY_PROJECT_KEY,
	onStart: ({ sessionToken }) => {
	  Sentry.setTag("openReplaySessionToken", sessionToken);
	},
})
```


أو في حالة الكود المختصر:

```javascript
if (window.OpenReplay.getSessionToken()) {
	Sentry.setTag("openReplaySessionToken", window.OpenReplay.getSessionToken());
}
```


### الخلفية
وإلا، إذا كنت تستخدم برنامج تطبيق Sentry للخلفية، يجب نقل رمز الجلسة من الواجهة الأمامية في كل طلب تريد تتبعه. يمكن القيام بذلك باستخدام رأس HTTP مخصص. في المثال أدناه، نستخدم API `fetch` لإرسال ذلك الرأس.


```javascript
const headers = {
  Accept: 'application/json',
  'Content-Type': 'application/json',
};
if (tracker.getSessionToken()) { // or window.OpenReplay instead of tracker if you're using the snippet
  headers['X-OpenReplay-SessionToken'] = tracker.getSessionToken(); // Inject openReplaySessionToken
}
fetch('www.your-backend.com', {
  'GET',
  headers,
});
```


يمكنك أيضًا استخدام OpenReplay [Fetch Plugin](/plugins/fetch) لتعيين الرأس تلقائيًا لكل طلب تتبع.

ثم يمكنك استخراج `openReplaySessionToken` من الرأس وإضافته إلى مدى Sentry (على الأقل باستخدام وسيط أو مزيف).


```python
with configure_scope() as scope:
  scope.set_tag('openReplaySessionToken', app.current_request.headers.get('X-OpenReplay-SessionToken'))
```


يجب أن يكون اسم العلامة بالضبط `openReplaySessionToken`.

## 4. إرفاق openReplaySessionURL (اختياري ولكن مفيد جدا)

إذا كنت ترغب في ربط عنوان URL لتسجيل OpenReplay مع Sentry وعرضه كعلامة، فإليك مثال على كيفية القيام بذلك:


```javascript
 const tracker = new OpenReplay({
 projectKey: window.OPENREPLAY_PROJECT_KEY,
 
 onStart: ({ sessionToken, sessionID }) => {
  // This is to link from OpenReplay -> Sentry
  Sentry.setTag("openReplaySessionToken", sessionToken);
 
  // This is to link from Sentry -> OpenReplay (requires tracker v3.6.0+)
  Sentry.setTag(
    "openReplaySessionURL",
    tracker.getSessionURL();
    );
  },
});
```

