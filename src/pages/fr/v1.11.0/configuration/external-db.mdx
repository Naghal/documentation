---
titre: "Base de données externe (Postgres)"
metaTitle: "Base de données externe (Postgres)"
metaDescription: "Comment modifier la destination de base de données par défaut d'OpenReplay et utiliser une base de données externe."
---

Notre service de base de données, Postgres, est installé par défaut avec OpenReplay et s'exécute dans un conteneur dédié sur votre instance pour un coût de déploiement plus faible. Si vous recherchez une plus grande scalabilité ou des opérations plus faciles, vous pouvez toujours utiliser un Postgres externe (c'est-à-dire AWS RDS ou GCP Cloud SQL).

## Exporter le schéma et les données existants

> **Note:** Si vous commencez à zéro et n'avez pas encore installé OpenReplay, procédez simplement à la configuration et ignorez les étapes suivantes.

Le schéma local et les données enregistrées doivent maintenant être exportés vers le Postgres externe:

1. Tout d'abord, sauvegardez la base de données locale:


```bash
kubectl exec -n db postgresql-postgresql-0 -- bash -c 'PGPASSWORD=<postgresPassword from vars.yaml> pg_dumpall -U postgres '"  > ~/path/to/dump.sql
```


2. Installez le client Postgres sur votre instance OpenReplay et assurez-vous qu'il a accès à la base de données externe:


```bash
sudo apt install postgresql-client
```


3. Restaurez la sauvegarde dans le nouveau Postgres externe:


```bash
PGPASSWORD=PG_PASSWORD psql -U PG_USERNAME -h [RDS_URL} -d postgres < /path/to/dump.sql
```


4. Enfin, mettez à jour toutes les variables `postgres` dans `openreplay -e` et pointez-les vers la base de données externe:


```yaml
  postgresqlPassword: "changeMePassword"
  postgresqlHost: "postgresql.db.svc.cluster.local"
  postgresqlPort: "5432"
  postgresqlUser: "postgres"
  postgresqlDatabase: "postgres"
```

